<VirtualHost 172.20.0.134:80 172.20.0.135:80>
    #ServerName  www.hotelderek.com
    #ServerAlias hotelderek.com *.hotelderek.com
    ServerName hotelderek.demos.sabrehospitality.com
    
    DocumentRoot /var/www/html/hotelderek_com/www/
    
    Options +FollowSymlinks -Indexes

    AddHandler x-httpd-php .cfm

    RewriteEngine on

    RewriteRule ^/direct/(.*)               /direct/$1 [QSA,L] #allows direct http access to non language specific php files.

    RewriteRule ^/([a-z]{2}\/.*)    /$1 [QSA,L] #any language subdirectory should be left alone
    RewriteRule ^/(.*\/$)               /en/$1index.php [QSA,L] #fix for links ending in /
    RewriteRule ^/(.*\.php)             /en/$1 [QSA,L]  #any php file with no language subdirectory redirects to the default language
    RewriteRule ^/(.*\.html)            /en/$1 [QSA,L]  #any html file with no language subdirectory redirects to the default language

    ErrorDocument 404 /404.php
    ErrorLog "|/usr/sbin/rotatelogs /var/www/html/hotelderek_com/logs/errors/%Y-%m-%d_errors.log 86400"
    CustomLog "|/usr/sbin/rotatelogs /var/www/html/hotelderek_com/logs/%Y-%m-%d_access.log 86400" combined
</VirtualHost>
