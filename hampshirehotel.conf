<VirtualHost 172.20.0.134:80 172.20.0.135:80>
    DocumentRoot /var/www/html/hampshirehotel_com/www/
    ServerName  www.hampshirehotel.co.za
    ServerAlias hampshirehotel.co.za *.hampshirehotel.co.za
    Options +FollowSymlinks -Indexes

	Redirect 301 / http://www.sabrehospitality.com/

    RewriteEngine on
    
    RewriteCond %{HTTP_HOST} !^www\.
    RewriteCond %{HTTP_HOST} !demos.sabrehospitality.com
    RewriteRule ^(.*)$ http://www.%{HTTP_HOST}$1 [R=301,L]
    RewriteCond %{HTTP_HOST} demos.sabrehospitality.com
    RewriteRule ^/robots.txt /var/www/html/robots/robots.txt [L]
	#RewriteRule ^/win/$ 	http://%{HTTP_HOST}/win? [NC,R=301,L]
	#RewriteRule ^/win$ 	http://www.clicklinktracker.com/c/?id=2162& [NC,R=301,L]

	RewriteRule ^/direct/(.*) 			/direct/$1 [QSA,L] #allows direct http access to non language specific php files.

	#permalink/sitemap stuff
    RewriteRule ^/event-site-map.xml    /event-site-map.xml.php [L,QSA]
	RewriteRule ^/mcc-site-map.xml      /mcc-site-map.xml.php [L,QSA]
    
	RewriteRule ^/(events/.*)/$ 		/$1? [NC,R=301,L,QSA]
	RewriteRule ^/(events/.*) 			/en/manhattan-nyc-hotel-events.php?permalink=$1 [L,QSA]
    
    RewriteRule ^/(packages/.*)/$       /$1? [NC,R=301,L,QSA]
    RewriteRule ^/(packages/.*)         /en/new-york-hotel-specials.php?permalink=$1 [L,QSA]	
    
    RewriteRule ^/(press/.*)/$ 		    /$1? [NC,R=301,L,QSA]
	RewriteRule ^/(press/.*) 		    /en/south-africa-hotel-press.php?permalink=$1 [L,QSA]

	RewriteRule ^/([a-z]{2}\/.*) 		/$1 [QSA,L] #any language subdirectory should be left alone
	RewriteRule ^/(images/.*) 			/$1 [L,QSA]
	RewriteRule ^/(.*\/$)	            /en/$1index.php [QSA,L] #fix for links ending in /
	RewriteRule ^/(.*\.php)        		/en/$1 [QSA,L]  
        
    ErrorDocument 404 /404.php

    ErrorLog "|/usr/sbin/rotatelogs /var/www/html/hampshirehotel_com/logs/errors/%Y-%m-%d_errors.log 86400"
    #CustomLog "|/usr/sbin/rotatelogs /var/www/html/hampshirehotel_com/logs/%Y-%m-%d_access.log 86400" combined
</VirtualHost>

<VirtualHost 72.32.63.142:80>
#    DocumentRoot /var/www/html/hampshirehotel_com_beta
#    ServerName  hampshirehotel.esitedemos.com
    Options +FollowSymlinks -Indexes

    RewriteEngine on
	#RewriteCond %{HTTP_HOST} !^www\.
	#RewriteRule ^(.*)$ 	http://www.%{HTTP_HOST}$1 [R=301,L]
	#RewriteRule ^/win/$ 	http://%{HTTP_HOST}/win? [NC,R=301,L]
	#RewriteRule ^/win$ 	http://www.clicklinktracker.com/c/?id=2162& [NC,R=301,L]

	RewriteRule ^/direct/(.*) 			/direct/$1 [QSA,L] #allows direct http access to non language specific php files.

	#permalink/sitemap stuff
	RewriteRule ^/event-site-map.xml    /event-site-map.xml.php [L,QSA]
    RewriteRule ^/mcc-site-map.xml      /mcc-site-map.xml.php [L,QSA]
    
	# events
	RewriteRule ^/(events/.*)/$ 		/$1? [NC,R=301,L,QSA]
	RewriteRule ^/(events/.*) 			/en/manhattan-nyc-hotel-events.php?permalink=$1 [L,QSA]

	# packages
	RewriteRule ^/(packages/.*)/$ 		/$1? [NC,R=301,L,QSA]
	RewriteRule ^/(packages/.*) 		/en/new-york-hotel-specials.php?permalink=$1 [L,QSA]

	# press
	RewriteRule ^/(press/.*)/$          /$1? [NC,R=301,L,QSA]
	RewriteRule ^/(press/.*)            /en/south-africa-hotel-press.php?permalink=$1 [L,QSA]

	# specials
	RewriteRule ^/(specials/.*)/$ 		/$1? [NC,R=301,L,QSA]
	RewriteRule ^/(specials/.*) 		/en/africa-hotel-specials.php?permalink=$1 [L,QSA]

	RewriteRule ^/([a-z]{2}\/.*) 		/$1 [QSA,L] #any language subdirectory should be left alone
	RewriteRule ^/(images/.*) 			/$1 [L,QSA]
	RewriteRule ^/(.*\/$)				/en/$1index.php [QSA,L] 
	RewriteRule ^/(.*\.php)        		/en/$1 [QSA,L]  
        
    ErrorDocument 404 /404.php
    ErrorLog "|/usr/sbin/rotatelogs /var/www/html/hampshirehotel_com/logs/errors/%Y-%m-%d_errors.log 86400"
    #CustomLog "|/usr/sbin/rotatelogs /var/www/html/hampshirehotel_com/logs/%Y-%m-%d_access.log 86400" combined
</VirtualHost>

<VirtualHost 172.20.0.134:80 172.20.0.135:80>
	ServerName www.hampshirehotelafrica.com 
	ServerAlias hampshirehotelafrica.com *.hampshirehotelafrica.com hampshirehotel.esitedemos.com
	Redirect 301 / http://www.hampshirehotel.co.za/
</VirtualHost>

<VirtualHost 172.20.0.134:80 172.20.0.135:80>
	ServerName www.hampshirehotel.com 
	ServerAlias hampshirehotel.com *.hampshirehotel.com
	Redirect 301 / http://www.hampshirehotel.co.za/
</VirtualHost>
