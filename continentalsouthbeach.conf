<VirtualHost 172.20.0.134:80 172.20.0.135:80>

    DocumentRoot /var/www/html/continentalsouthbeach_com/www
	ServerName www.continentalsouthbeach.com
	ServerAlias continentalsouthbeach.com *.continentalsouthbeach.com
	ServerAlias continentalsouthbeach.demos.sabrehospitality.com
    Options +FollowSymlinks -Indexes

    RewriteEngine On

    

    #RewriteCond %{HTTP_HOST} !^www\.
	
    #RewriteRule ^(.*)$ http://www.%{HTTP_HOST}$1 [R=301,L]

    

    RewriteRule ^/direct/(.*) /direct/$1 [QSA,L] #allows direct http access to non language specific php files.

    RewriteRule ^/ecrm/(.*)     /ecrm/$1 [QSA,L] #allows direct http access to non language specific php files.

    RewriteRule ^/ecards/(.*)     /ecards/$1 [QSA,L] #allows direct http access to non language specific php files.

    RewriteRule ^/images/(.*)     /images/$1 [QSA,L] #allows direct http access to non language specific php files.

    RewriteRule ^/includes/(.*)     /includes/$1 [QSA,L] #allows direct http access to non language specific php files.

    RewriteRule ^/pdfs/(.*) /pdfs/$1 [QSA,L]

        

    RewriteRule ^/event-site-map.xml    /event-site-map.xml.php [L,QSA]

    RewriteRule ^/(([a-z]{2}\/)?)event-site-map.xml    /$1event-site-map.xml.php [QSA]

    RewriteRule ^/(([a-z]{2}\/)?)mcc-site-map.xml    /$1mcc-site-map.xml.php [QSA]

    

    RewriteRule ^/(events/.*)/$     /$1? [NC,R=301,L,QSA]

    RewriteRule ^/(events/.*)       /en/resort-spa-activities.php?permalink=$1 [L,QSA]

    

    RewriteRule ^/([a-z]{2}\/.*) /$1 [QSA,L] #any language subdirectory should be left alone

    RewriteRule ^/(.*\/$)    /en/$1index.php [QSA,L] #fix for links ending in /

    RewriteRule ^/(.*\.php)    /en/$1 [QSA,L]  #any php file with no language subdirectory redirects to the default language

    RewriteRule ^/(.*\.html) /en/$1 [QSA,L]  #any html file with no language subdirectory redirects to the default language

    
    ErrorDocument 404 /404.php
    ErrorLog "|/usr/sbin/rotatelogs /var/www/html/continentalsouthbeach_com/logs/errors/%Y-%m-%d_errors.log 86400"
    CustomLog "|/usr/sbin/rotatelogs /var/www/html/continentalsouthbeach_com/logs/%Y-%m-%d_access.log 86400" combined

</VirtualHost>
